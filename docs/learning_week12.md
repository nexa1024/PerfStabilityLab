# Week 12：网络与弱网稳定性（超时/重试/幂等/降级）+ 算法综合（minSdk 26）

> 本周目标：建立网络稳定性的“策略脑”：什么时候该重试、如何保证幂等、如何做缓存兜底/降级；Demo 里做可控的超时/失败注入与策略对照。  
> 本周交付：弱网治理清单 + 一个“可配置超时/重试/降级”的网络实验页。

---

## 每日固定配方（90 分钟）

- 15m 算法：综合题 1 道（回顾模板）
- 45m 阅读 + 笔记：超时/重试/幂等/缓存/降级
- 25m Demo：失败注入 → 策略对照 → 验证（日志/统计）
- 5m 输出：卡片 1 张

---

## Day 1：超时/重试/幂等关系

- 算法：综合题 1 道。
- 阅读笔记：写《超时/重试/幂等三者关系》
  - 不幂等的请求盲目重试会造成重复提交
- Demo：`NetworkLab`（新建实验页）骨架与日志输出格式。
- 输出卡片：《幂等一句话定义》。

验收：你能解释“为什么重试必须考虑幂等”。

---

## Day 2：失败注入（超时/失败率）与统计

- 算法：综合题 1 道。
- 阅读笔记：写《弱网常见现象》
  - 高延迟、丢包、间歇失败、DNS 慢
- Demo：
  - 在 `NetworkLab` 做一个“请求模拟器”（不一定真实联网）：
    - 可配置：延迟、失败率、超时阈值
    - 复现：高延迟/高失败
    - 记录：成功率、平均耗时、P95（先简单统计即可）
- 输出卡片：《稳定性指标：成功率/耗时分位》。

验收：你能输出一段统计结果（哪怕是日志），体现“策略前后对比”。

---

## Day 3：重试策略（退避/次数/条件）

- 算法：综合题 1 道。
- 阅读笔记：写《重试策略最小集合》
  - 次数上限、退避、只对可重试错误重试
- Demo：
  - `NetworkLab`
    - 修复：加入退避重试（例如 100ms/200ms/400ms）
    - 验证：对比成功率/耗时变化，并写结论
- 输出卡片：《退避重试的目的》。

验收：你能解释“为什么要退避”以及“重试带来的代价”。

---

## Day 4：缓存兜底与降级

- 算法：综合题 1 道。
- 阅读笔记：写《缓存与降级的边界》
  - 过期策略、数据一致性、展示兜底文案
- Demo：
  - `NetworkLab`
    - 复现：请求失败
    - 修复：返回上次成功结果（本地缓存）或展示降级数据
    - 验证：失败时用户仍能看到内容（日志证明走了兜底分支）
- 输出卡片：《降级：我保证什么、不保证什么》。

验收：你能写出“失败时系统行为”的确定性描述，而不是“看运气”。

---

## Day 5：输出《弱网治理清单》

- 算法：错题复盘 1 题。
- 阅读笔记：输出《弱网治理清单（1 页）》
  - 超时设置、重试与退避、幂等保障、缓存兜底、降级、监控
- Demo：把 `NetworkLab` 的验证结论输出格式固定为 2 行（证据+结论）。
- 输出卡片：《网络稳定性证据链模板》。

验收：你能把网络问题描述成“策略对照实验”，而不是“感觉慢”。

---

## Day 6：周复盘（网络稳定性证据链一份）

- 算法：补短板 1 题。
- 阅读笔记：写《Week12：网络稳定性证据链复盘稿》。
- Demo：整理 `NetworkLab` 的默认参数（便于快速演示不同策略）。
- 输出卡片：《Week12 我能治理的网络问题》。

本周验收：你能在 Demo 里做“失败注入→重试/降级策略→统计对照”，并写出证据链结论。

