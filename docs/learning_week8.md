# Week 8：OOM 专题（Bitmap/缓存/抖动）+ DP 入门（minSdk 26）

> 本周目标：把 OOM 作为“可控实验”来学习：峰值、Bitmap、缓存上限、采样与降级；同时开始 DP 的推导套路（状态/转移/初始化/遍历）。  
> 本周交付：1 个可控 OOM 或接近 OOM 的实验 + 1 个 downsample/上限策略对照 + OOM 治理清单。

---

## 每日固定配方（90 分钟）

- 15m 算法：DP 入门题 1 道（重在写出状态与转移）
- 45m 阅读 + 笔记：Bitmap/缓存与内存峰值
- 25m Demo：对照实验（坏→好）并用 Memory Profiler 观察
- 5m 输出：卡片 1 张

---

## Day 1：OOM 与峰值直觉 + DP 四步

- 算法：DP 入门 1 题（爬楼梯/打家劫舍/最长递增子序列任选其一）。
- 阅读笔记：写《OOM 本质是峰值超过上限》
  - 不是“内存一直涨”才 OOM，瞬时峰值也会
- Demo：`OomLab` 增加说明：本周关注峰值与 Bitmap。
- 输出卡片：《DP 四步》：状态/转移/初始化/遍历顺序。

验收：DP 题能写出状态定义，不再只背结论。

---

## Day 2：实验 — 大图/大量分配制造接近 OOM（谨慎可控）

- 算法：DP 经典题 1 道（写清转移方程）。
- 阅读笔记：写《Bitmap 为什么容易 OOM》
  - 分辨率、像素格式、解码、缓存叠加
- Demo：
  - `OomLab` 的“复现”：加载/生成大 Bitmap 或大量对象（控制强度，避免影响开发环境）
  - 记录：分配前后 Memory Profiler 观察点（峰值/分配）
- 输出卡片：《OOM 复现要点：可控与可恢复》。

验收：你能稳定制造“内存峰值明显上升”的现象，并能用 Profiler 观察到峰值。

---

## Day 3：对照 — downsample/上限策略（坏→好）

- 算法：DP 经典题 1 道（写清初始化与边界）。
- 阅读笔记：写《采样/缓存上限的取舍》
  - 画质、速度、内存，三者取舍
- Demo：
  - `OomLab`
    - 修复：对 Bitmap 做采样（downsample）或限制缓存上限
    - 验证：对比峰值、对比分配次数/峰值高度
  - “验证”按钮输出 2 行结论（峰值下降/分配减少）。
- 输出卡片：《OOM 修复：我改了什么》。

验收：能给出“峰值下降”的证据描述（哪怕是数值区间变化）。

---

## Day 4：内存抖动→GC→卡顿链路（为 Week15 做铺垫）

- 算法：DP 题 1 道（强调遍历顺序）。
- 阅读笔记：写《抖动 vs 泄漏 vs OOM 再区分》
  - 抖动强调“频繁分配与回收”，不一定 OOM
- Demo：在 `GcJankLab` 或 `OomLab` 增加“分配波峰对照”按钮（少分配 vs 多分配）。
- 输出卡片：《我如何描述一次内存抖动》。

验收：你能在 Profiler 里看到“锯齿状分配/回收”的趋势，并能解释它可能带来的影响。

---

## Day 5：输出《OOM 治理清单》

- 算法：DP 综合 1 题（能把状态/转移写完整）。
- 阅读笔记：输出《OOM 治理清单（1 页）》
  - Bitmap 解码、缓存上限、资源降级、分页/分批、避免峰值叠加
- Demo：把 `OomLab` 的复现/修复/验证三按钮跑通并写结论到日志区。
- 输出卡片：《OOM 证据链怎么写》。

验收：你能把 OOM 治理说成“入口→上限→降级→验证”。

---

## Day 6：周复盘（OOM 证据链一份 + DP 入门固化）

- 算法：补一题你本周 DP 最不稳的模型。
- 阅读笔记：写《Week8：OOM 证据链复盘稿》（现象→证据→修复→回归）。
- Demo：整理 OOM 实验的“安全开关”（避免误操作导致环境不稳）。
- 输出卡片：《Week8 我能讲清的 OOM 原因与治理》。

本周验收：你能演示一次“峰值上升→风险→修复策略→峰值下降”的闭环，并能写出 DP 的推导步骤。

