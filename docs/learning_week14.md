# Week 14：深挖掉帧定位（渲染/帧调度直觉）+ 算法补短板（minSdk 26）

> 本周目标：把掉帧从“感觉卡”变成“能测、能统计、能定位到触发模式”；重点是帧调度直觉与可观测性（简单统计也行）。  
> 本周交付：一个帧耗时统计实验 + 一个“频繁 requestLayout/invalidate”抖动实验 + 掉帧定位证据链一页纸。

---

## 每日固定配方（90 分钟）

- 15m 算法：补短板题 1 道（从错题本挑）
- 45m 阅读 + 笔记：渲染/帧调度直觉（不追源码细节）
- 25m Demo：帧耗时统计 + 抖动复现与修复
- 5m 输出：卡片 1 张

---

## Day 1：帧调度概览（直觉）

- 算法：补短板 1 题。
- 阅读笔记：写《掉帧的最小解释》
  - 一帧预算、主线程与渲染线程分工（到能解释）
- Demo：新建 `FrameLab`（或复用 `JankLab` 的子场景）骨架。
- 输出卡片：《掉帧=帧耗时超预算》。

验收：你能清楚说出“掉帧为什么发生、我怎么证明”。

---

## Day 2：帧耗时统计（简单版）

- 算法：补短板 1 题。
- 阅读笔记：写《统计要回答什么》
  - 平均帧耗时、P95、最大值、超过阈值的次数
- Demo：
  - `FrameLab`
    - 复现：开启帧统计（例如用 `Choreographer` 回调做帧间隔统计）
    - 验证：在日志区输出最近 N 秒统计结果
- 输出卡片：《帧统计我看哪几个数》。

验收：你能在页面上看到一段统计输出（不用很精确，但要稳定）。

---

## Day 3：抖动实验（高频 requestLayout/invalidate）

- 算法：补短板 1 题。
- 阅读笔记：写《requestLayout/invalidate 的代价差异》（复习）。
- Demo：
  - `FrameLab` 或 `InvalidateLab`
    - 复现：高频触发 requestLayout/invalidate 导致统计指标变差
    - 修复：降频/合并更新/只更新必要区域
    - 验证：帧统计指标改善（或 trace/Profiler 支撑）
- 输出卡片：《抖动修复：我用什么策略》。

验收：能用统计结果证明修复有效（至少“超阈值次数下降”）。

---

## Day 4：常见掉帧模式总结

- 算法：补短板 1 题。
- 阅读笔记：写《掉帧模式库（最小版）》
  - 列表 bind 重、布局重、图片解码、频繁刷新、GC 抖动
- Demo：给 `FrameLab` 的验证按钮增加“模式归类结论”输出（2 行）。
- 输出卡片：《掉帧归因：我优先排查哪个模式》。

验收：你能把一次掉帧归到模式库中某一类，并写出下一步证据获取方式。

---

## Day 5：输出《掉帧定位证据链》

- 算法：错题复盘 1 题。
- 阅读笔记：输出《掉帧定位证据链（一页纸）》
  - 现象→帧统计→trace→定位触发点→修复→回归
- Demo：确保 `FrameLab` 统计输出稳定、可重复。
- 输出卡片：《掉帧证据链模板》。

验收：你能把“统计+trace”结合起来描述证据链，而不是只报感觉。

---

## Day 6：周复盘（完整走查）

- 算法：补短板 1 题（本周最不稳）。
- 阅读笔记：写《Week14：掉帧走查复盘稿》。
- Demo：跑一遍复现/修复/验证并落盘，确保可复用。
- 输出卡片：《Week14 我能证明的掉帧问题》。

本周验收：你能演示一次“抖动导致掉帧→统计变差→修复→统计改善”的闭环。

